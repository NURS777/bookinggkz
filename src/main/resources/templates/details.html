<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns="http://www.w3.org/1999/html"
      layout:decorate="~{layout/mainD.html}">
<div layout:fragment="siteContent">
  <div class="container p-2">
    <div class="row">
      <img th:src="@{'/viewphoto/'+${event.getEventImg()}}" class="card-img-top" alt="..." style="height:450px">
    </div>
    <div class="row mt-3">
      <div class="col-lg-8" >
        <div>
          <h1 th:text="${event.getName()}"></h1>
        </div>
        <div>
          <h1 th:text="${event.getTitle()}"></h1>
        </div>
        <div>
          <p th:text="${event.getDescription()}"></p>
        </div>
        <div>
          <b>Price:  </b><small th:text="${event.getPrice()}"></small>KZT
        </div>
      </div>
      <div class="col-lg-4">
        <div class="card w-70 h-90 mt-3" style="border: 0.5px solid rgba(0, 0, 0, 0.7);
box-shadow: 4px 4px 4px rgba(0, 0, 0, 0.25);border-radius: 10px 10px 10px 0px;">
          <div class="card-body text-center">
            <div>
              <h6 class="card-title" th:text="${event.getDate()}"></h6>
              <span class="card-text"><b>Address: </b></span><br>
              <span th:text="${event.getAddress()}"></span>
              <span class="card-text"><b>Organizator: </b></span><br>
              <span th:text="${event.getOrganization().getName()}"></span>
              <p class="card-text"><b>Partner numbers:</b></p>
              <p class="card-text" th:text="${event.getPartnumber()}"></p>
              <p class="card-text" th:text="${event.getOrganization().getPhonenumber()}"></p>
              <button type="button" class="btn-info" style="width: 70%" data-bs-toggle="modal" data-bs-target="#bookEvent">
                Book
              </button>
            </div>

            <div class="modal fade" id="bookEvent" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog">


                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="staticBackdropLabel">Please fill in your purchase details</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form th:action="@{/bookevent}" method="post">
                      <input class="form-control" type="hidden" name="id" th:value="${event.getId()}">
                    <div class="modal-body">
                      <div class="pt-lg-3 pe-lg-3 pb-lg-3" style="width: 100%;height: 40%; border: 1px solid rgba(0, 0, 0, 0.2);border-radius: 5px;">
                        <div class="pb-lg-2" style="width: 100%; text-align: justify">
                          <b style="font-family: 'Roboto';font-style: normal;font-weight: 600;font-size: 16px;color: #444444;margin-bottom: 8%;margin-left: 3%">
                            Specify the number of tickets</b>
                        </div>
                        <div class="container-fluid">
                          <div class="row">
                            <div class="col-lg-4" style="text-align: left;">
                              <b>Price</b><br>
                              <span th:text="${event.getPrice()}"></span><span> tg</span>
                            </div>
                            <div class="col-lg-8 ms-lg-5 mt-2" style="position: absolute;">
                                <button id="minus" style="background: #FFFFFF;;border: 0.5px solid #000000;border-radius: 5px; margin-right: 2%" type="button">-</button>
                                <input required name="numberoftickets" id="input" type="text" th:value="1" style="width: 5%;border: 0px">
                                <button id="plus" style="background: #FFFFFF;;border: 0.5px solid #000000;border-radius: 5px; margin-left: 2%" type="button">+</button>
                              <script>
                                let plus = document.getElementById('plus');
                                let input = document.getElementById('input');
                                let minus = document.getElementById('minus');
                                let inputValue = input.value;

                                plus.addEventListener('click',function (){
                                  if(inputValue<9){
                                    inputValue++;
                                    input.value = inputValue;
                                  }
                                });
                                minus.addEventListener('click',function (){
                                  if(inputValue>1){
                                    inputValue--;
                                    input.value = inputValue;
                                  }
                                });
                              </script>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="mt-3 mb-3" style="text-align: left">
                        <label style="font-family: 'Roboto';font-weight: 600;font-size: 14px;color: #707070;">
                          Write down your phone number </label><br>
                        <input required type="number" class="form-control" id="exampleFormControlNumber" name="bookphonenum" style="border: 1px solid rgba(0, 0, 0, 0.2);box-shadow: 4px 4px 4px rgba(0, 0, 0, 0.25);border-radius: 5px;width: 60%">
                      </div>
                    <div class="modal-footer" style="width: 100%">
                      <button class="btn-info mx-auto" style="border-radius: 5px;width: 60%">Book</button>
                    </div>
                    </div>
                </form>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</html>

































